<div class="login-page" [class.ready]="pageReady">
  <!-- Floating Background Images -->
  <div class="floating-images">
    <img src="assets/berber.png" class="float-img img-1" alt="">
    <img src="assets/Berber2.jpg" class="float-img img-2" alt="">
    <img src="assets/koufor.jpg" class="float-img img-3" alt="">
    <img src="assets/Kuaför.jpg" class="float-img img-4" alt="">
    <img src="assets/Kuaför2.jpg" class="float-img img-5" alt="">
    <img src="assets/oto.jpg" class="float-img img-6" alt="">
  </div>

  <!-- Back Link -->
  <a routerLink="/" class="back-link">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
    <span>Anasayfaya Dön</span>
  </a>

  <!-- Dark Mode Toggle -->
  <button class="theme-toggle" (click)="toggleDarkMode()">
    <span *ngIf="!isDarkMode">🌙</span>
    <span *ngIf="isDarkMode">☀️</span>
  </button>

  <!-- Main Card -->
  <div class="auth-card">
    <!-- Tab Buttons -->
    <div class="tab-container">
      <button 
        class="tab-btn" 
        [class.active]="!isLoginMode"
        (click)="isLoginMode = false">
        Kayıt Ol
      </button>
      <button 
        class="tab-btn" 
        [class.active]="isLoginMode"
        (click)="isLoginMode = true">
        Giriş Yap
      </button>
      <!-- Active Indicator -->
      <div class="tab-indicator" [class.right]="isLoginMode"></div>
    </div>

    <!-- Forms Container -->
    <div class="forms-wrapper">
      <div class="forms-slider" [class.slide-login]="isLoginMode">
        
        <!-- Signup Form -->
        <div class="form-panel signup-panel">
          <h2>Hesap Oluştur</h2>
          <p class="subtitle">İşletmenizi kaydedin ve randevu almaya başlayın</p>
          
          <div *ngIf="signupError" class="error-msg">{{ signupError }}</div>
          
          <form (ngSubmit)="onSignup()">
            <div class="input-group floating-label" [class.has-value]="signupName" [class.invalid]="validation.signupName.touched && !validation.signupName.valid" [class.valid]="validation.signupName.touched && validation.signupName.valid">
              <input type="text" [(ngModel)]="signupName" name="signupName" (blur)="validateField('signupName')" (input)="validateField('signupName')" id="signupName">
              <label for="signupName">İşletme Adı *</label>
              <span class="validation-icon" *ngIf="validation.signupName.touched">
                <span *ngIf="validation.signupName.valid">✓</span>
                <span *ngIf="!validation.signupName.valid">!</span>
              </span>
              <span class="error-text" *ngIf="validation.signupName.touched && !validation.signupName.valid">En az 2 karakter giriniz</span>
            </div>
            
            <div class="input-group floating-label" [class.has-value]="signupPhone" [class.invalid]="validation.signupPhone.touched && !validation.signupPhone.valid" [class.valid]="validation.signupPhone.touched && validation.signupPhone.valid && signupPhone">
              <input type="tel" [(ngModel)]="signupPhone" name="signupPhone" (blur)="validateField('signupPhone')" (input)="validateField('signupPhone')" id="signupPhone">
              <label for="signupPhone">Telefon</label>
              <span class="validation-icon" *ngIf="validation.signupPhone.touched && signupPhone">
                <span *ngIf="validation.signupPhone.valid">✓</span>
                <span *ngIf="!validation.signupPhone.valid">!</span>
              </span>
              <span class="error-text" *ngIf="validation.signupPhone.touched && !validation.signupPhone.valid">Geçersiz telefon formatı</span>
            </div>
            
            <div class="input-row">
              <div class="input-group floating-label" [class.has-value]="signupIl">
                <input type="text" [(ngModel)]="signupIl" name="signupIl" id="signupIl">
                <label for="signupIl">İl</label>
              </div>
              <div class="input-group floating-label" [class.has-value]="signupIlce">
                <input type="text" [(ngModel)]="signupIlce" name="signupIlce" id="signupIlce">
                <label for="signupIlce">İlçe</label>
              </div>
            </div>
            
            <div class="input-row">
              <div class="input-group floating-label" [class.has-value]="signupMahalle">
                <input type="text" [(ngModel)]="signupMahalle" name="signupMahalle" id="signupMahalle">
                <label for="signupMahalle">Mahalle</label>
              </div>
              <div class="input-group floating-label" [class.has-value]="signupSokak">
                <input type="text" [(ngModel)]="signupSokak" name="signupSokak" id="signupSokak">
                <label for="signupSokak">Sokak</label>
              </div>
            </div>
            
            <div class="input-group floating-label password-group" [class.has-value]="signupPassword" [class.invalid]="validation.signupPassword.touched && !validation.signupPassword.valid" [class.valid]="validation.signupPassword.touched && validation.signupPassword.valid">
              <input [type]="showSignupPassword ? 'text' : 'password'" [(ngModel)]="signupPassword" name="signupPassword" (blur)="validateField('signupPassword')" (input)="validateField('signupPassword')" id="signupPassword">
              <label for="signupPassword">Şifre *</label>
              <button type="button" class="toggle-password" (click)="togglePasswordVisibility('signup')">
                <span *ngIf="!showSignupPassword">👁️</span>
                <span *ngIf="showSignupPassword">🙈</span>
              </button>
            </div>
            
            <!-- Password Strength Meter -->
            <div class="password-strength" *ngIf="signupPassword">
              <div class="strength-bar">
                <div class="strength-fill" [class]="passwordStrengthClass" [style.width.%]="passwordStrength * 20"></div>
              </div>
              <span class="strength-text" [class]="passwordStrengthClass">{{ passwordStrengthText }}</span>
            </div>
            
            <button type="submit" class="submit-btn" [disabled]="loading">
              <span *ngIf="!loading">Kayıt Ol</span>
              <span *ngIf="loading" class="loading-spinner"></span>
              <span *ngIf="loading">Kaydediliyor...</span>
            </button>
          </form>
        </div>

        <!-- Login Form -->
        <div class="form-panel login-panel">
          <h2>Tekrar Hoşgeldiniz</h2>
          <p class="subtitle">Hesabınıza giriş yapın</p>
          
          <div *ngIf="loginError" class="error-msg">{{ loginError }}</div>
          <div *ngIf="loginSuccess" class="success-msg">{{ loginSuccess }}</div>
          
          <form (ngSubmit)="onLogin()">
            <div class="input-group floating-label" [class.has-value]="loginTelefon" [class.invalid]="validation.loginTelefon.touched && !validation.loginTelefon.valid" [class.valid]="validation.loginTelefon.touched && validation.loginTelefon.valid">
              <input type="tel" [(ngModel)]="loginTelefon" name="loginTelefon" (blur)="validateField('loginTelefon')" (input)="validateField('loginTelefon')" id="loginTelefon">
              <label for="loginTelefon">Telefon</label>
              <span class="validation-icon" *ngIf="validation.loginTelefon.touched">
                <span *ngIf="validation.loginTelefon.valid">✓</span>
                <span *ngIf="!validation.loginTelefon.valid">!</span>
              </span>
            </div>
            
            <div class="input-group floating-label password-group" [class.has-value]="loginPassword" [class.invalid]="validation.loginPassword.touched && !validation.loginPassword.valid" [class.valid]="validation.loginPassword.touched && validation.loginPassword.valid">
              <input [type]="showLoginPassword ? 'text' : 'password'" [(ngModel)]="loginPassword" name="loginPassword" (blur)="validateField('loginPassword')" (input)="validateField('loginPassword')" id="loginPassword">
              <label for="loginPassword">Şifre</label>
              <button type="button" class="toggle-password" (click)="togglePasswordVisibility('login')">
                <span *ngIf="!showLoginPassword">👁️</span>
                <span *ngIf="showLoginPassword">🙈</span>
              </button>
            </div>
            
            <button type="submit" class="submit-btn" [disabled]="loading">
              <span *ngIf="!loading">Giriş Yap</span>
              <span *ngIf="loading" class="loading-spinner"></span>
              <span *ngIf="loading">Giriş yapılıyor...</span>
            </button>
          </form>
        </div>

      </div>
    </div>
  </div>
</div>
